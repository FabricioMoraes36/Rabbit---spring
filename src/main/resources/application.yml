spring:
  application:
    name: demo
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
  cloud:
    function:
      definition: inventoryOrderConsumer;invoiceOrderConsumer
    stream:
      bindings:
        #        order-out-0:
        #          destination: orders.created
        #          content-type: application/json
        #        final-dlq-order-out-0:
        #          destination: final.dlq.orders.created
        #          content-type: application/json
        #          producer:
        #            required-groups: inventory-order-consumer # Necessary to create the


        # Binding
        userCreated-out-0:
          destination: users.events
        userDeleted-out-0:
          destination: users.events




      #        inventoryOrderConsumer-in-0:
      #          destination: orders.created
      #          group: inventory-order-consumer
      #          consumer:
      #            # IMPORTANT: we want broker-based retry, not in-container retry
      #            max-attempts: 1
      #            bind-queue: false
      #            declare-exchange: false
      #            queue-name-group-only: true
      #        invoiceOrderConsumer-in-0:
      #          destination: orders.created
      #          group: invoice-order-consumer
      #          consumer:
      #            # IMPORTANT: we want broker-based retry, not in-container retry
      #            max-attempts: 1
      #            bind-queue: false
      #            declare-exchange: false
      #            queue-name-group-only: true
      rabbit:
        bindings:
          #          inventoryOrderConsumer-in-0:
          #            consumer:
          #              auto-bind-dlq: true
          #              dlq-ttl: 10000
          #              dlq-dead-letter-exchange:
          #          invoiceOrderConsumer-in-0:
          #            consumer:
          #              auto-bind-dlq: true
          #              dlq-ttl: 10000
          #              dlq-dead-letter-exchange:
          userCreated-out-0:
            producer:
              routingKeyExpression: "'user.events.created'"
